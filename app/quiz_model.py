import os
import google.generativeai as genai
from dotenv import load_dotenv
load_dotenv()

genai.configure(api_key=os.environ["GEMINI_API_KEY"])

# Create the model
generation_config = {
  "temperature": 1,
  "top_p": 0.95,
  "top_k": 64,
  "max_output_tokens": 8192,
  "response_mime_type": "text/plain",
}

model = genai.GenerativeModel(
  model_name="gemini-1.5-flash",
  generation_config=generation_config,
  # safety_settings = Adjust safety settings
  # See https://ai.google.dev/gemini-api/docs/safety-settings
  system_instruction="Task: Generate quizzes based on provided data.\n\nData Format:\n\ngrade: The grade level of the quiz (e.g., 5)\nSubject: The subject matter of the quiz (e.g., Maths)\nTotalQuestions: The desired number of questions in the quiz\nMaxScore: The maximum possible score for the quiz\nDifficulty: The difficulty level of the quiz (e.g., EASY, MEDIUM, HARD)\nResponse Format:\n\nA JSON object containing the generated quiz, including:\nquestions: An array of question objects, each containing:\nquestionText: The text of the question\noptions: An array of possible answer options\ncorrectAnswer: The index of the correct answer\nmaxScore: The maximum possible score for the quiz",
)

chat_session = model.start_chat(
  history=[
    {
      "role": "user",
      "parts": [
        "I will provide this input \nGenerate quiz for the following:\nGrade : 5\nSubject : Maths\nTotal Questions:10\nMax score: 10\nDifficulty: Easy\nand you have to generate quiz of following type as an example\n{\n  \"grade\": 5,\n  \"subject\": \"Maths\",\n  \"totalQuestions\": 10,\n  \"maxScore\": 10,\n  \"difficulty\": \"EASY\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"What is 7 + 5?\",\n      \"options\": {\n        \"A\": \"10\",\n        \"B\": \"11\",\n        \"C\": \"12\",\n        \"D\": \"13\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"What is 9 * 3?\",\n      \"options\": {\n        \"A\": \"27\",\n        \"B\": \"29\",\n        \"C\": \"30\",\n        \"D\": \"25\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"What is 15 / 3?\",\n      \"options\": {\n        \"A\": \"6\",\n        \"B\": \"5\",\n        \"C\": \"4\",\n        \"D\": \"3\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"What is the value of Pi (approximately)?\",\n      \"options\": {\n        \"A\": \"3.1\",\n        \"B\": \"3.14\",\n        \"C\": \"3.1416\",\n        \"D\": \"3.142\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"What is the area of a square with side length 4?\",\n      \"options\": {\n        \"A\": \"12\",\n        \"B\": \"16\",\n        \"C\": \"20\",\n        \"D\": \"24\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q6\",\n      \"questionText\": \"What is 50% of 200?\",\n      \"options\": {\n        \"A\": \"100\",\n        \"B\": \"120\",\n        \"C\": \"150\",\n        \"D\": \"110\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q7\",\n      \"questionText\": \"How many sides does a hexagon have?\",\n      \"options\": {\n        \"A\": \"4\",\n        \"B\": \"5\",\n        \"C\": \"6\",\n        \"D\": \"7\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q8\",\n      \"questionText\": \"What is 8 * 8?\",\n      \"options\": {\n        \"A\": \"64\",\n        \"B\": \"66\",\n        \"C\": \"68\",\n        \"D\": \"60\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q9\",\n      \"questionText\": \"What is 25% of 400?\",\n      \"options\": {\n        \"A\": \"75\",\n        \"B\": \"100\",\n        \"C\": \"150\",\n        \"D\": \"50\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q10\",\n      \"questionText\": \"How many minutes are there in 2 hours?\",\n      \"options\": {\n        \"A\": \"60\",\n        \"B\": \"120\",\n        \"C\": \"90\",\n        \"D\": \"150\"\n      },\n      \"correctAnswer\": \"B\"\n    }\n  ]\n}\n",
      ],
    },
    {
      "role": "model",
      "parts": [
        "```json\n{\n  \"grade\": 5,\n  \"subject\": \"Maths\",\n  \"totalQuestions\": 10,\n  \"maxScore\": 10,\n  \"difficulty\": \"EASY\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"What is 7 + 5?\",\n      \"options\": {\n        \"A\": \"10\",\n        \"B\": \"11\",\n        \"C\": \"12\",\n        \"D\": \"13\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"What is 9 * 3?\",\n      \"options\": {\n        \"A\": \"27\",\n        \"B\": \"29\",\n        \"C\": \"30\",\n        \"D\": \"25\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"What is 15 / 3?\",\n      \"options\": {\n        \"A\": \"6\",\n        \"B\": \"5\",\n        \"C\": \"4\",\n        \"D\": \"3\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"What is 20 - 12?\",\n      \"options\": {\n        \"A\": \"8\",\n        \"B\": \"9\",\n        \"C\": \"10\",\n        \"D\": \"7\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"What is 4 * 5?\",\n      \"options\": {\n        \"A\": \"18\",\n        \"B\": \"20\",\n        \"C\": \"16\",\n        \"D\": \"22\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q6\",\n      \"questionText\": \"What is the value of 1/2 + 1/2?\",\n      \"options\": {\n        \"A\": \"1\",\n        \"B\": \"1/4\",\n        \"C\": \"1/2\",\n        \"D\": \"2\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q7\",\n      \"questionText\": \"How many sides does a triangle have?\",\n      \"options\": {\n        \"A\": \"2\",\n        \"B\": \"3\",\n        \"C\": \"4\",\n        \"D\": \"5\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q8\",\n      \"questionText\": \"What is 100 / 10?\",\n      \"options\": {\n        \"A\": \"10\",\n        \"B\": \"15\",\n        \"C\": \"20\",\n        \"D\": \"5\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q9\",\n      \"questionText\": \"What is 6 + 6 + 6?\",\n      \"options\": {\n        \"A\": \"18\",\n        \"B\": \"24\",\n        \"C\": \"15\",\n        \"D\": \"21\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q10\",\n      \"questionText\": \"How many minutes are there in 1 hour?\",\n      \"options\": {\n        \"A\": \"60\",\n        \"B\": \"30\",\n        \"C\": \"90\",\n        \"D\": \"120\"\n      },\n      \"correctAnswer\": \"A\"\n    }\n  ]\n}\n```",
      ],
    },
    {
      "role": "user",
      "parts": [
        "Generate quiz for the following:\nGrade : 5\nSubject:English\nTotal Questions:5\nMax score: 5\nDifficulty: Hard\n",
      ],
    },
    {
      "role": "model",
      "parts": [
        "```json\n{\n  \"grade\": 5,\n  \"subject\": \"English\",\n  \"totalQuestions\": 5,\n  \"maxScore\": 5,\n  \"difficulty\": \"HARD\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"Choose the word that is a synonym for \\\"magnificent\\\":\",\n      \"options\": {\n        \"A\": \"Tiny\",\n        \"B\": \"Grand\",\n        \"C\": \"Ugly\",\n        \"D\": \"Simple\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"Which sentence uses the correct past tense of the verb \\\"go\\\"?\",\n      \"options\": {\n        \"A\": \"I goed to the store yesterday.\",\n        \"B\": \"I went to the store yesterday.\",\n        \"C\": \"I gone to the store yesterday.\",\n        \"D\": \"I will go to the store yesterday.\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"Identify the correct plural form of \\\"child\\\":\",\n      \"options\": {\n        \"A\": \"Childs\",\n        \"B\": \"Childer\",\n        \"C\": \"Children\",\n        \"D\": \"Childrens\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"Choose the word that best completes the sentence: \\\"The weather was so ______ that we had to stay inside.\\\"\",\n      \"options\": {\n        \"A\": \"Sunny\",\n        \"B\": \"Pleasant\",\n        \"C\": \"Stormy\",\n        \"D\": \"Beautiful\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"Which sentence uses correct punctuation?\",\n      \"options\": {\n        \"A\": \"I love to read books, and, my favorite author is J.K Rowling.\",\n        \"B\": \"I love to read books, and my favorite author is J.K Rowling.\",\n        \"C\": \"I love to read books and my favorite author is J.K Rowling.\",\n        \"D\": \"I love to read books, and my favorite author is, J.K. Rowling.\"\n      },\n      \"correctAnswer\": \"B\"\n    }\n  ]\n}\n```",
      ],
    },
    {
      "role": "user",
      "parts": [
        "Here is one more example for you\nGenerate quiz for the following:\nGrade : 3\nSubject: Social Studies\nTotal Questions:6\nMax score: 6\nDifficulty: Easy\n\n{\n  \"grade\": 3,\n  \"subject\": \"Social Studies\",\n  \"totalQuestions\": 6,\n  \"maxScore\": 6,\n  \"difficulty\": \"EASY\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"Who was the first President of the United States?\",\n      \"options\": {\n        \"A\": \"Abraham Lincoln\",\n        \"B\": \"George Washington\",\n        \"C\": \"John Adams\",\n        \"D\": \"Thomas Jefferson\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"What is the capital of France?\",\n      \"options\": {\n        \"A\": \"Rome\",\n        \"B\": \"Madrid\",\n        \"C\": \"Berlin\",\n        \"D\": \"Paris\"\n      },\n      \"correctAnswer\": \"D\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"Which continent is the Sahara Desert located in?\",\n      \"options\": {\n        \"A\": \"Asia\",\n        \"B\": \"Africa\",\n        \"C\": \"Australia\",\n        \"D\": \"Europe\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"Which of these is a natural resource?\",\n      \"options\": {\n        \"A\": \"Plastic\",\n        \"B\": \"Water\",\n        \"C\": \"Steel\",\n        \"D\": \"Glass\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"Which state is known as the 'Sunshine State'?\",\n      \"options\": {\n        \"A\": \"Texas\",\n        \"B\": \"California\",\n        \"C\": \"Florida\",\n        \"D\": \"Hawaii\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q6\",\n      \"questionText\": \"What is the tallest mountain in the world?\",\n      \"options\": {\n        \"A\": \"Mount Everest\",\n        \"B\": \"K2\",\n        \"C\": \"Mount Kilimanjaro\",\n        \"D\": \"Denali\"\n      },\n      \"correctAnswer\": \"A\"\n    }\n  ]\n}",
      ],
    },
    {
      "role": "model",
      "parts": [
        "```json\n{\n  \"grade\": 3,\n  \"subject\": \"Social Studies\",\n  \"totalQuestions\": 6,\n  \"maxScore\": 6,\n  \"difficulty\": \"EASY\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"What is the name of the country we live in?\",\n      \"options\": {\n        \"A\": \"Canada\",\n        \"B\": \"Mexico\",\n        \"C\": \"United States\",\n        \"D\": \"Brazil\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"What is the capital city of the United States?\",\n      \"options\": {\n        \"A\": \"New York City\",\n        \"B\": \"Los Angeles\",\n        \"C\": \"Washington D.C.\",\n        \"D\": \"Chicago\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"Which of these is a famous landmark in the United States?\",\n      \"options\": {\n        \"A\": \"The Eiffel Tower\",\n        \"B\": \"The Great Wall of China\",\n        \"C\": \"The Statue of Liberty\",\n        \"D\": \"The Taj Mahal\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"What is a map used for?\",\n      \"options\": {\n        \"A\": \"To show the weather\",\n        \"B\": \"To show the time\",\n        \"C\": \"To show locations\",\n        \"D\": \"To show the news\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"Which of these is a type of transportation?\",\n      \"options\": {\n        \"A\": \"A chair\",\n        \"B\": \"A book\",\n        \"C\": \"A car\",\n        \"D\": \"A pencil\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q6\",\n      \"questionText\": \"What is the name of the planet we live on?\",\n      \"options\": {\n        \"A\": \"Mars\",\n        \"B\": \"Venus\",\n        \"C\": \"Earth\",\n        \"D\": \"Jupiter\"\n      },\n      \"correctAnswer\": \"C\"\n    }\n  ]\n}\n```",
      ],
    },
    {
      "role": "user",
      "parts": [
        "Generate quiz for the following:\nGrade : 9\nSubject: Hindi\nTotal Questions:10\nMax score: 10\nDifficulty: Medium",
      ],
    },
    {
      "role": "model",
      "parts": [
        "```json\n{\n  \"grade\": 9,\n  \"subject\": \"Hindi\",\n  \"totalQuestions\": 10,\n  \"maxScore\": 10,\n  \"difficulty\": \"MEDIUM\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"निम्नलिखित में से कौन सा शब्द 'समाचार' का पर्यायवाची है?\",\n      \"options\": {\n        \"A\": \"समाचार\",\n        \"B\": \"सूचना\",\n        \"C\": \"संदेश\",\n        \"D\": \"सब\"\n      },\n      \"correctAnswer\": \"D\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"वाक्य में 'वह' शब्द का कौन सा रूप सही है?\",\n      \"options\": {\n        \"A\": \"वह\",\n        \"B\": \"उसे\",\n        \"C\": \"उसके\",\n        \"D\": \"उनके\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"कौन सा वाक्य शुद्ध है?\",\n      \"options\": {\n        \"A\": \"मैं कल स्कूल जाऊंगा।\",\n        \"B\": \"मैं कल स्कूल गया था।\",\n        \"C\": \"मैं कल स्कूल जा रहा हूं।\",\n        \"D\": \"मैं कल स्कूल जाऊंगा था।\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"निम्नलिखित में से कौन सा शब्द विलोमार्थी है 'अंधेरा'?\",\n      \"options\": {\n        \"A\": \"रात\",\n        \"B\": \"प्रकाश\",\n        \"C\": \"सूर्य\",\n        \"D\": \"चंद्रमा\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"वाक्य में 'पढ़ना' शब्द का कौन सा रूप सही है?\",\n      \"options\": {\n        \"A\": \"पढ़ता\",\n        \"B\": \"पढ़ती\",\n        \"C\": \"पढ़ते\",\n        \"D\": \"पढ़ेगा\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q6\",\n      \"questionText\": \"कौन सा वाक्य 'बहुत' शब्द का प्रयोग सही रूप से करता है?\",\n      \"options\": {\n        \"A\": \"वह बहुत बड़ा है।\",\n        \"B\": \"वह बहुत अच्छे है।\",\n        \"C\": \"वह बहुत सुंदर है।\",\n        \"D\": \"वह बहुत दुखी है।\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q7\",\n      \"questionText\": \"निम्नलिखित में से कौन सा शब्द 'अच्छा' का विशेषण रूप है?\",\n      \"options\": {\n        \"A\": \"अच्छे\",\n        \"B\": \"अच्छा\",\n        \"C\": \"अच्छी\",\n        \"D\": \"अच्छे से\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q8\",\n      \"questionText\": \"वाक्य में 'लिखना' शब्द का कौन सा रूप सही है?\",\n      \"options\": {\n        \"A\": \"लिखता\",\n        \"B\": \"लिखती\",\n        \"C\": \"लिखते\",\n        \"D\": \"लिखा\"\n      },\n      \"correctAnswer\": \"C\"\n    },\n    {\n      \"questionId\": \"q9\",\n      \"questionText\": \"निम्नलिखित में से कौन सा शब्द 'मित्र' का बहुवचन है?\",\n      \"options\": {\n        \"A\": \"मित्रों\",\n        \"B\": \"मित्रा\",\n        \"C\": \"मित्र\",\n        \"D\": \"मित्रता\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q10\",\n      \"questionText\": \"वाक्य में 'खाना' शब्द का कौन सा रूप सही है?\",\n      \"options\": {\n        \"A\": \"खाता\",\n        \"B\": \"खाती\",\n        \"C\": \"खाते\",\n        \"D\": \"खाया\"\n      },\n      \"correctAnswer\": \"C\"\n    }\n  ]\n}\n``` \n",
      ],
    },
    {
      "role": "user",
      "parts": [
        "Generate quiz for the following:\nGrade :  Engineering 2nd Year\nSubject: C++\nTotal Questions:10\nMax score: 10\nDifficulty: Medium",
      ],
    },
    {
      "role": "model",
      "parts": [
        "```json\n{\n  \"grade\": \"Engineering 2nd Year\",\n  \"subject\": \"C++\",\n  \"totalQuestions\": 10,\n  \"maxScore\": 10,\n  \"difficulty\": \"MEDIUM\",\n  \"questions\": [\n    {\n      \"questionId\": \"q1\",\n      \"questionText\": \"What is the difference between a class and a struct in C++?\",\n      \"options\": {\n        \"A\": \"Classes can have private members, structs cannot.\",\n        \"B\": \"Structs are faster to access than classes.\",\n        \"C\": \"Classes are always used for inheritance, structs are not.\",\n        \"D\": \"The default access specifier for members in a class is private, while in a struct it's public.\"\n      },\n      \"correctAnswer\": \"D\"\n    },\n    {\n      \"questionId\": \"q2\",\n      \"questionText\": \"What is the purpose of the 'const' keyword in C++?\",\n      \"options\": {\n        \"A\": \"To declare a constant variable.\",\n        \"B\": \"To declare a constant function that cannot modify class members.\",\n        \"C\": \"To declare a constant object.\",\n        \"D\": \"All of the above.\"\n      },\n      \"correctAnswer\": \"D\"\n    },\n    {\n      \"questionId\": \"q3\",\n      \"questionText\": \"What is the difference between a reference and a pointer in C++?\",\n      \"options\": {\n        \"A\": \"References are aliases to existing variables, while pointers hold the memory address of a variable.\",\n        \"B\": \"References must be initialized at declaration, while pointers can be assigned later.\",\n        \"C\": \"References cannot be reassigned, while pointers can.\",\n        \"D\": \"All of the above.\"\n      },\n      \"correctAnswer\": \"D\"\n    },\n    {\n      \"questionId\": \"q4\",\n      \"questionText\": \"What is the purpose of the 'new' and 'delete' operators in C++?\",\n      \"options\": {\n        \"A\": \"To dynamically allocate and deallocate memory respectively.\",\n        \"B\": \"To create new variables and destroy them respectively.\",\n        \"C\": \"To copy objects and delete them respectively.\",\n        \"D\": \"To initialize variables and release them respectively.\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q5\",\n      \"questionText\": \"What is polymorphism in C++?\",\n      \"options\": {\n        \"A\": \"The ability of a function to take different data types as input.\",\n        \"B\": \"The ability of a single function to perform different actions based on the object it's called on.\",\n        \"C\": \"The ability of a class to inherit from multiple parent classes.\",\n        \"D\": \"The ability of a class to override methods from its parent class.\"\n      },\n      \"correctAnswer\": \"B\"\n    },\n    {\n      \"questionId\": \"q6\",\n      \"questionText\": \"What is the difference between a constructor and a destructor in C++?\",\n      \"options\": {\n        \"A\": \"Constructors initialize objects, destructors clean up after them.\",\n        \"B\": \"Constructors can be overloaded, destructors cannot.\",\n        \"C\": \"Constructors are called when an object is created, destructors are called when an object is destroyed.\",\n        \"D\": \"All of the above.\"\n      },\n      \"correctAnswer\": \"D\"\n    },\n    {\n      \"questionId\": \"q7\",\n      \"questionText\": \"What is the purpose of the 'this' pointer in C++?\",\n      \"options\": {\n        \"A\": \"To access the current object's members from within the object's methods.\",\n        \"B\": \"To access the memory address of the current object.\",\n        \"C\": \"To return the current object.\",\n        \"D\": \"To declare a pointer to an object.\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q8\",\n      \"questionText\": \"What is the difference between pass by value and pass by reference in C++?\",\n      \"options\": {\n        \"A\": \"Pass by value copies the value of the argument, pass by reference passes the address.\",\n        \"B\": \"Pass by value allows modifications to the original argument, pass by reference does not.\",\n        \"C\": \"Pass by value is faster than pass by reference.\",\n        \"D\": \"Pass by value is used for primitive data types, pass by reference is used for objects.\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q9\",\n      \"questionText\": \"What is a template in C++?\",\n      \"options\": {\n        \"A\": \"A way to create generic functions and classes that can work with different data types.\",\n        \"B\": \"A type of data structure used to store data.\",\n        \"C\": \"A type of function that takes a variable number of arguments.\",\n        \"D\": \"A way to define the structure of a class.\"\n      },\n      \"correctAnswer\": \"A\"\n    },\n    {\n      \"questionId\": \"q10\",\n      \"questionText\": \"What is the difference between a 'friend' function and a member function in C++?\",\n      \"options\": {\n        \"A\": \"Friend functions have access to private members of a class, member functions do not.\",\n        \"B\": \"Member functions are defined within the class, friend functions are defined outside.\",\n        \"C\": \"Friend functions can be called without an object, member functions need an object to be called.\",\n        \"D\": \"All of the above.\"\n      },\n      \"correctAnswer\": \"D\"\n    }\n  ]\n}\n``` \n",
      ],
    },
  ]
)
def extract_content_from_response(response_text):
    start_index = response_text.find("json") + len("json") + 1
    end_index = response_text.find("```", start_index)
    extracted_content = response_text[start_index:end_index-1]

    return extracted_content

def quiz_generator(grade, subject, total_questions, max_score, difficulty):
  response = chat_session.send_message(f"""
  Generate quiz for the following:
  Grade : {grade}
  Subject: {subject}
  Total Questions:{total_questions}
  Max score: {max_score}
  Difficulty: {difficulty}
  """)
  return extract_content_from_response(response.text)
# quiz=quiz_generator(5, "Maths", 10, 10, "Easy")
# print(type(quiz))

# import json
# print(json.loads(quiz))